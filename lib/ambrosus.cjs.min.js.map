{"version":3,"file":"ambrosus.cjs.min.js","sources":["../src/responseHandler.js","../src/api/request.js","../src/utils.js","../src/api/assets.js","../src/api/events.js","../src/api/accounts.js","../src/index.js"],"sourcesContent":["/*\nCopyright: Ambrosus Technologies GmbH\nEmail: tech@ambrosus.com\nThis Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.\nIf a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.\nThis Source Code Form is “Incompatible With Secondary Licenses”, as defined by the Mozilla Public License, v. 2.0.\n*/\n\nexport const handleResponse = request => {\n  return new Promise((resolve, reject) => {\n    const response = {\n      status: request.status,\n      data: null,\n      message: JSON.parse(request.response).reason\n    };\n\n    if (request.status === 200 || request.status === 201) {\n      response.data = JSON.parse(request.response);\n      response.message = 'success';\n      resolve(response);\n    }\n    reject(response);\n  });\n};\n\nexport const rejectResponse = message => {\n  return {\n    status: 400,\n    data: null,\n    message: message\n  };\n};\n\nexport const successResponse = data => {\n  return {\n    status: 200,\n    data: data,\n    message: 'success'\n  };\n};\n","/*\nCopyright: Ambrosus Technologies GmbH\nEmail: tech@ambrosus.com\nThis Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.\nIf a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.\nThis Source Code Form is “Incompatible With Secondary Licenses”, as defined by the Mozilla Public License, v. 2.0.\n*/\n\nimport { handleResponse } from './../responseHandler';\n\nexport default class Request {\n  constructor(settings) {\n    this._settings = settings;\n  }\n\n  getRequest(path) {\n    return new Promise((resolve, reject) => {\n      let request = new XMLHttpRequest();\n\n      request.open('GET', `${this._settings.apiEndpoint}/${path}`, true);\n      if (this._settings.headers) {\n        for (const key in this._settings.headers) {\n          request.setRequestHeader(`${key}`, `${this._settings.headers[key]}`);\n        }\n      }\n      request.addEventListener(\n        'load',\n        () => {\n          handleResponse(request)\n            .then(response => resolve(response))\n            .catch(error => reject(error));\n        },\n        false\n      );\n      request.send();\n    });\n  }\n\n  postRequest(path, params) {\n    return new Promise((resolve, reject) => {\n      let request = new XMLHttpRequest();\n\n      request.open('POST', `${this._settings.apiEndpoint}/${path}`, true, this._settings);\n      request.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n      if (this._settings.headers) {\n        for (const key in this._settings.headers) {\n          request.setRequestHeader(`${key}`, `${this._settings.headers[key]}`);\n        }\n      }\n\n      request.onload = () => {\n        handleResponse(request)\n          .then(response => resolve(response))\n          .catch(error => reject(error));\n      };\n\n      request.send(JSON.stringify(params));\n    });\n  }\n}\n","/*\nCopyright: Ambrosus Technologies GmbH\nEmail: tech@ambrosus.com\nThis Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.\nIf a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.\nThis Source Code Form is “Incompatible With Secondary Licenses”, as defined by the Mozilla Public License, v. 2.0.\n*/\n\nconst validTimestamp = timestamp => {\n  return new Date(timestamp).getTime() > 0;\n};\n\nexport const checkTimeStamp = event => {\n  let timestamp = Math.floor(Date.now() / 1000);\n\n  return event.content && event.content.idData && event.content.idData.timestamp && validTimestamp(event.content.idData.timestamp) ? event.content.idData.timestamp : timestamp;\n};\n\nexport const parseEvents = eventsArray => {\n  return eventsArray.results.reduce(\n    (asset, { content, eventId }) => {\n      const timestamp = content.idData.timestamp;\n      const author = content.idData.createdBy;\n\n      if (content && content.data) {\n        content.data\n          .filter(obj => {\n            const parts = obj.type.split('.');\n            const type = parts[parts.length - 1];\n            const category = parts[parts.length - 2] || 'asset';\n            const namespace = parts[parts.length -3] || 'ambrosus';\n\n            obj.timestamp = timestamp;\n            obj.author = author;\n            obj.name = obj.name || type;\n            obj.action = type;\n            obj.type = type;\n            obj.eventId = eventId;\n\n            if (obj.type === 'location' && category === 'event') {\n              content.data.reduce((location, _event) => {\n                if (_event.type !== 'location') {\n                  _event.location = location;\n                }\n              }, obj);\n            } else {\n              return obj;\n            }\n          })\n          .map(event => {\n            if (['info', 'redirection', 'identifiers', 'branding'].indexOf(event.type) > -1) {\n              if (!asset[event.type] || asset[event.type].timestamp < event.timestamp) {\n                asset[event.type] = event;\n              }\n            } else {\n              asset.events.push(event);\n            }\n          });\n      }\n\n      return asset;\n    },\n    {\n      events: []\n    }\n  );\n};\n\nexport const serializeParams = params => {\n  let serializeParams = '';\n\n  for (let key in params) {\n    if (serializeParams !== '') {\n      serializeParams += '&';\n    }\n    serializeParams += key + '=' + encodeURIComponent(params[key]);\n  }\n  return serializeParams;\n};\n\nexport const serializeForHashing = (object) => {\n  const isDict = (subject) => typeof subject === 'object' && !Array.isArray(subject);\n  const isString = (subject) => typeof subject === 'string';\n  const isArray = (subject) => Array.isArray(subject);\n\n  if (isDict(object)) {\n    const content = Object.keys(object).sort().map((key) => `\"${key}\":${serializeForHashing(object[key])}`).join(',');\n\n    return `{${content}}`;\n  } else if (isArray(object)) {\n    const content = object.map((item) => serializeForHashing(item)).join(',');\n\n    return `[${content}]`;\n  } else if (isString(object)) {\n    return `\"${object}\"`;\n  }\n  return object.toString();\n};\n\n// private method for UTF-8 encoding\nconst utf8Encode = (string) => {\n  string = string.replace(/\\r\\n/g, '\\n');\n  let utftext = '';\n\n  for (let n = 0; n < string.length; n++) {\n\n    let c = string.charCodeAt(n);\n\n    if (c < 128) {\n      utftext += String.fromCharCode(c);\n    } else if ((c > 127) && (c < 2048)) {\n      utftext += String.fromCharCode((c >> 6) | 192);\n      utftext += String.fromCharCode((c & 63) | 128);\n    } else {\n      utftext += String.fromCharCode((c >> 12) | 224);\n      utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n      utftext += String.fromCharCode((c & 63) | 128);\n    }\n\n  }\n\n  return utftext;\n};\n\nlet _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nexport const base64url = (input) => {\n\n  let output = '';\n  let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n  let i = 0;\n\n  input = utf8Encode(input);\n\n  while (i < input.length) {\n\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n\n    if (isNaN(chr2)) {\n      enc3 = enc4 = 64;\n    } else if (isNaN(chr3)) {\n      enc4 = 64;\n    }\n\n    output = output +\n      _keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n      _keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\n  }\n\n  return output;\n\n};\n\nexport const checkAccessLevel = event => {\n  try {\n    return event.content.idData.accessLevel;\n  } catch (error) {\n    return 0;\n  }\n};\n","/*\nCopyright: Ambrosus Technologies GmbH\nEmail: tech@ambrosus.com\nThis Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.\nIf a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.\nThis Source Code Form is “Incompatible With Secondary Licenses”, as defined by the Mozilla Public License, v. 2.0.\n*/\n\nimport Request from './request';\nimport { serializeParams } from './../utils';\n\nexport default class Assets {\n  constructor(settings) {\n    this._settings = settings;\n    this._request = new Request(this._settings);\n  }\n\n  getAssetById(assetId) {\n    return new Promise((resolve, reject) => {\n      this._request.getRequest(`assets/${encodeURIComponent(assetId)}`)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  getAssets(params) {\n    return new Promise((resolve, reject) => {\n      this._request.getRequest(`assets?${serializeParams(params)}`)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  createAsset(params) {\n    return new Promise((resolve, reject) => {\n      this._request.postRequest('assets', params)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n}\n","/*\nCopyright: Ambrosus Technologies GmbH\nEmail: tech@ambrosus.com\nThis Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.\nIf a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.\nThis Source Code Form is “Incompatible With Secondary Licenses”, as defined by the Mozilla Public License, v. 2.0.\n*/\n\nimport Request from './request';\nimport { serializeParams } from './../utils';\n\nexport default class Events {\n  constructor(settings) {\n    this._settings = settings;\n    this._request = new Request(this._settings);\n  }\n\n  getEventById(eventId) {\n    return new Promise((resolve, reject) => {\n      this._request.getRequest(`events/${encodeURIComponent(eventId)}`)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  getEvents(params) {\n    return new Promise((resolve, reject) => {\n      this._request.getRequest(`events?${serializeParams(params)}`)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  createEvent(assetId, params) {\n    return new Promise((resolve, reject) => {\n      this._request.postRequest(`assets/${assetId}/events`, params)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  getBundleById(bundleId) {\n    return new Promise((resolve, reject) => {\n      this._request.getRequest(`bundle/${encodeURIComponent(bundleId)}`)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n}\n","/*\nCopyright: Ambrosus Technologies GmbH\nEmail: tech@ambrosus.com\nThis Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.\nIf a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.\nThis Source Code Form is “Incompatible With Secondary Licenses”, as defined by the Mozilla Public License, v. 2.0.\n*/\n\nimport Request from './request';\n\nexport default class Accounts {\n  constructor(settings) {\n    this._settings = settings;\n    this._request = new Request(this._settings);\n  }\n\n  addAccount(params) {\n    return new Promise((resolve, reject) => {\n      this._request.postRequest('accounts', params)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n}\n","/*\nCopyright: Ambrosus Technologies GmbH\nEmail: tech@ambrosus.com\nThis Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.\nIf a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.\nThis Source Code Form is “Incompatible With Secondary Licenses”, as defined by the Mozilla Public License, v. 2.0.\n*/\n\nimport Assets from './api/assets';\nimport Events from './api/events';\nimport Accounts from './api/accounts';\nimport {\n  checkTimeStamp,\n  parseEvents,\n  serializeForHashing,\n  base64url,\n  checkAccessLevel\n} from './utils';\nimport {\n  rejectResponse,\n  successResponse\n} from './responseHandler';\nlet assetSequenceNumber = 0;\n\nexport default class AmbrosusSDK {\n  constructor(extendSettings) {\n    this._settings = {\n      apiEndpoint: 'https://gateway-test.ambrosus.com'\n    };\n    this.events = {};\n    this.empty = [];\n\n    for (const key in extendSettings) {\n      if (extendSettings.hasOwnProperty(key)) {\n        this._settings[key] = extendSettings[key];\n      }\n    }\n\n    /* istanbul ignore if */\n    if (this._settings.Web3 && this._settings.secret) {\n      this.web3 = new this._settings.Web3();\n\n      if (this.web3.version.api) {\n        console.log('Old version of web3 is not supported, Please import v1.0.0+');\n      } else {\n        this._settings.address = this.getAddress(this._settings.secret);\n        this._settings.token = this.getToken(this._settings.secret);\n      }\n\n    } else if (this._settings.Web3) {\n      this.web3 = new this._settings.Web3();\n    }\n\n    this._assets = new Assets(this._settings);\n    this._events = new Events(this._settings);\n    this._accounts = new Accounts(this._settings);\n\n  }\n\n  getToken(secret, timestamp) {\n    if (!this.web3) {\n      return rejectResponse('web3.js Library is required generate the token');\n    }\n    /* istanbul ignore next */\n    const idData = {\n      createdBy: this.getAddress(secret),\n      validUntil: timestamp ? timestamp : Math.floor(Date.now() / 1000) + 300\n    };\n\n    /* istanbul ignore next */\n    return base64url(serializeForHashing({\n      signature: this.sign(idData, secret),\n      idData\n    }));\n  }\n\n  getAddress(secret) {\n    if (!this.web3) {\n      return rejectResponse('web3.js Library is required get the address');\n    }\n    /* istanbul ignore next */\n    return this.web3.eth.accounts.privateKeyToAccount(secret).address;\n  }\n\n  sign(data, secret) {\n    if (!this.web3) {\n      return rejectResponse('web3.js Library is required get the signature');\n    }\n    /* istanbul ignore next */\n    return this.web3.eth.accounts.sign(serializeForHashing(data), secret).signature;\n  }\n\n  /**\n   * Returns object consisting of address & privateKey\n   * @returns {address, privateKey}\n   */\n  getPkPair() {\n    if (!this.web3) {\n      return rejectResponse('web3.js Library is required generate the publicKey / privateKey pair');\n    }\n    return this.web3.eth.accounts.create(this.web3.utils.randomHex(32));\n  }\n\n  getAssetById(assetId) {\n    return new Promise((resolve, reject) => {\n      if (!assetId) {\n        return reject(rejectResponse('Asset ID is missing.'));\n      }\n      return this._assets.getAssetById(assetId)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  getEventById(eventId) {\n    return new Promise((resolve, reject) => {\n      if (!eventId) {\n        return reject(rejectResponse('Event ID is missing.'));\n      }\n\n      return this._events.getEventById(eventId)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  getAssets(params = {}) {\n    return new Promise((resolve, reject) => {\n      return this._assets.getAssets(params)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  getEvents(params) {\n    return new Promise((resolve, reject) => {\n      return this._events.getEvents(params)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  createAsset(asset = {}) {\n    /* istanbul ignore next */\n    return new Promise((resolve, reject) => {\n      let idData = {};\n\n      if (!this.web3) {\n        return reject(rejectResponse('web3.js library is required to create an asset'));\n      } else if (!this._settings.secret) {\n        return reject(rejectResponse('Secret missing: Please initialize the SDK with your secret key'));\n      }\n\n      idData = {\n        timestamp: checkTimeStamp(event),\n        sequenceNumber: assetSequenceNumber = (assetSequenceNumber + 1) % 1000000,\n        createdBy: this._settings.address\n      };\n\n      if (asset && asset.content && asset.content.data) {\n        idData['dataHash'] = this.web3.eth.accounts.hashMessage(serializeForHashing(asset.content.data));\n      }\n\n      let params = {\n        content: {\n          idData: idData,\n          signature: this.sign(idData, this._settings.secret)\n        }\n      };\n\n      if (params.content && params.content.idData && params.content.idData.dataHash) {\n        params.content['data'] = asset.content.data;\n      }\n\n      return this._assets.createAsset(params)\n        .then(assetRes => {\n          if (asset.length >= 1) {\n\n            asset.map((event) => {\n              return this.createEvent(assetRes.data.assetId, event)\n                .then(response => resolve(response))\n                .catch(error => reject(error));\n            });\n\n            this.emit('asset:created');\n            resolve(assetRes);\n          } else {\n            this.emit('asset:created');\n            resolve(assetRes);\n            return;\n          }\n        })\n        .catch(error => reject(error));\n    });\n  }\n\n  createEvent(assetId, event) {\n    /* istanbul ignore next */\n    return new Promise((resolve, reject) => {\n\n      if (!this.web3) {\n        return reject(rejectResponse('web3.js library is required to create an event'));\n      } else if (!this._settings.secret) {\n        return reject(rejectResponse('Secret missing: Please initialize the SDK with your secret key'));\n      }\n\n      if (!assetId) {\n        return reject(rejectResponse('Asset ID is missing.'));\n      }\n\n      if (!event) {\n        return reject(rejectResponse('Event data is missing.'));\n      }\n\n      let params = {};\n\n      if (event.content && event.content.data) {\n\n        const idData = {\n          assetId: assetId,\n          timestamp: checkTimeStamp(event),\n          accessLevel: checkAccessLevel(event),\n          createdBy: this._settings.address,\n          dataHash: this.web3.eth.accounts.hashMessage(serializeForHashing(event.content.data))\n        };\n\n        params = {\n          content: {\n            idData: idData,\n            signature: this.sign(idData, this._settings.secret),\n            data: event.content.data\n          }\n        };\n\n      } else {\n        return reject(rejectResponse('Invalid data: No content found at content.data.'));\n      }\n\n      return this._events.createEvent(assetId, params)\n        .then((response) => {\n          this.emit('event:created');\n          resolve(response);\n        })\n        .catch(error => reject(error));\n    });\n  }\n\n  parseEvents(eventsArray) {\n    return new Promise((resolve, reject) => {\n\n      if (eventsArray && eventsArray.results) {\n        return resolve(successResponse(parseEvents(eventsArray)));\n      }\n\n      return reject(rejectResponse('Results array is missing.'));\n\n    });\n  }\n\n  getBundleById(bundleId) {\n    return new Promise((resolve, reject) => {\n      if (!bundleId) {\n        return reject(rejectResponse('Bundle ID is missing.'));\n      }\n      return this._events.getBundleById(bundleId)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  addAccount(params) {\n    return new Promise((resolve, reject) => {\n      if (!this._settings.secret) {\n        return reject(rejectResponse('Secret key is required to add an account.'));\n      } else if (!params) {\n        return reject(rejectResponse('Create account params are required to create an account.'));\n      }\n      this.setTokenHeader(this._settings.secret);\n      return this._accounts.addAccount(params)\n        .then(response => resolve(response))\n        .catch(error => reject(error));\n    });\n  }\n\n  setTokenHeader(secret) {\n    if (!secret) {\n      return rejectResponse('Secret is required to generate the token');\n    }\n    this._settings['headers'] = {\n      'Authorization': `AMB_TOKEN ${this.getToken(secret)}`\n    };\n  }\n\n  on(type, func, ctx) {\n    (this.events[type] = this.events[type] || []).push([func, ctx]);\n    return this;\n  }\n\n  off(type, func) {\n    type || (this.events = {});\n    let list = this.events[type] || this.empty;\n    let i = (list.length = func ? list.length : 0);\n\n    while (i--) {\n      func === list[i][0] && list.splice(i, 1);\n    }\n    return this;\n  }\n\n  emit(type) {\n    let e = this.events[type] || this.empty;\n    let list = e.length > 0 ? e.slice(0, e.length) : e;\n    let i = 0;\n    let j;\n\n    while ((j = list[i++])) {\n      j[0].apply(j[1], this.empty.slice.call(arguments, 1));\n    }\n    return this;\n  }\n\n}\n"],"names":["handleResponse","request","Promise","resolve","reject","const","response","status","data","message","JSON","parse","reason","rejectResponse","successResponse","Request","settings","_settings","getRequest","path","let","XMLHttpRequest","open","this","apiEndpoint","headers","key","setRequestHeader","addEventListener","then","catch","error","send","postRequest","params","onload","stringify","validTimestamp","timestamp","Date","getTime","checkTimeStamp","event","Math","floor","now","content","idData","parseEvents","eventsArray","results","reduce","asset","ref","author","createdBy","filter","obj","parts","type","split","length","category","namespace","name","action","eventId","location","_event","map","indexOf","events","push","serializeParams","encodeURIComponent","serializeForHashing","object","subject","Array","isArray","Object","keys","sort","join","item","toString","utf8Encode","string","String","fromCharCode","replace","c","utftext","n","charCodeAt","_keyStr","base64url","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","i","isNaN","charAt","checkAccessLevel","accessLevel","Assets","_request","getAssetById","assetId","getAssets","createAsset","this$1","Events","getEventById","getEvents","createEvent","getBundleById","bundleId","Accounts","addAccount","assetSequenceNumber","AmbrosusSDK","extendSettings","empty","hasOwnProperty","Web3","secret","web3","version","api","console","log","address","getAddress","token","getToken","_assets","_events","_accounts","validUntil","signature","sign","eth","accounts","privateKeyToAccount","getPkPair","create","utils","randomHex","sequenceNumber","hashMessage","dataHash","assetRes","emit","setTokenHeader","on","func","ctx","off","list","splice","j","e","slice","apply","call","arguments"],"mappings":"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"}